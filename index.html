<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="styling.css">
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500&display=swap" rel="stylesheet">
  <title>Calculator</title>
</head>
<body>

  <div class="container">
    <form action="" name="calc" class="calculator">
      <input type="text" class="value" readonly name="txt" />
      <!--all the buttons in the calculator-->
      <span class="num clear" onclick="clearInput()"><i>AC</i></span>
      <span class="num" onclick="appendText('mod')"><i>mod</i></span>
      <span class="num" onclick="square()"><i>x<sup>2</sup></i></span>
      <span class="num" onclick="appendText('/')"><i>/</i></span>
      <span class="num" onclick="calc.txt.value+='7'"><i>7</i></span>
      <span class="num" onclick="calc.txt.value+='8'"><i>8</i></span>
      <span class="num" onclick="calc.txt.value+='9'"><i>9</i></span>
      <span class="num" onclick="calc.txt.value+='*'"><i>*</i></span>
      <span class="num" onclick="calc.txt.value+='4'"><i>4</i></span>
      <span class="num" onclick="calc.txt.value+='5'"><i>5</i></span>
      <span class="num" onclick="calc.txt.value+='6'"><i>6</i></span>
      <span class="num" onclick="calc.txt.value+='-'"><i>-</i></span>
      <span class="num" onclick="calc.txt.value+='1'"><i>1</i></span>
      <span class="num" onclick="calc.txt.value+='2'"><i>2</i></span>
      <span class="num" onclick="calc.txt.value+='3'"><i>3</i></span>
      <span class="num" onclick="calc.txt.value+='+'"><i>+</i></span>
      <span class="num" onclick="calc.txt.value+='0'"><i>0</i></span>
      <span class="num" onclick="calc.txt.value+='00'"><i>00</i></span>
      <span class="num" onclick="calc.txt.value+='.'"><i>.</i></span>
      <span class="num equal" onclick="calculateResult()"><i>=</i></span>
    </form>
  </div>

  <script>
    //function to clear input in the text area
    function clearInput() {
      document.calc.txt.value = '';
    }

    //function to append values
    function appendText(value) {
      document.calc.txt.value += value;
    }

  
    function square() {
      var txtField = document.calc.txt;
      var inputValue = txtField.value;

      if (inputValue.length > 0) {
        // function to calculate square and update the input field
        var squaredValue = Math.pow(parseFloat(inputValue), 2);
        txtField.value = squaredValue;
      }
    }

    function calculateResult() {
      var txtField = document.calc.txt;
      var inputValue = txtField.value;

      if (inputValue.length > 0) {
        // function to calculate result using custom parsing and evaluation
        var result = evaluateExpression(inputValue);
        txtField.value = result;
      }
    }

    function evaluateExpression(expression) {
      try {
        //Finding and replacing 'mod' with '%'
        expression = expression.replace(/mod/g, '%');

        // Using eval with caution, or implementing your own safer evaluation
        var value = eval(expression);

        return value;
      } catch (error) {
        return 'Error';
      }
    }
  </script>
</body>
</html>
